#include "AD5065.h"

#include "xil_io.h"
#include "xparameters.h"

void setBothDacVoltage(UINTPTR addres, float voltage, float refVoltage) {
	float relativeVoltage = voltage / refVoltage;
	int val = (int)(65535*relativeVoltage);

	// Multiply the value by 16 in order to compensate for the 4 LSB zeros
	Xil_Out32(UINTPTR Addr,XPAR_AD5065_DUAL_DAC_AXI_0_BASEADDR, UPDATE_BOTH_DAC_COMMAND + 16*val);
}

